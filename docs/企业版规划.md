# NervusDB 企业版规划

**文档版本**: v1.0  
**创建日期**: 2025-01-14  
**状态**: 规划中  
**预计启动**: 社区版发布 3-6 个月后

---

## 📋 目录

- [版本定位](#版本定位)
- [功能对比](#功能对比)
- [企业版核心特性](#企业版核心特性)
- [技术架构升级](#技术架构升级)
- [实施路线图](#实施路线图)
- [定价策略](#定价策略)
- [目标客户](#目标客户)
- [商业价值](#商业价值)
- [技术保障](#技术保障)
- [FAQ](#faq)

---

## 版本定位

### 🌟 社区版 (Community Edition) - 当前

**定位**: 个人开发者、学习、小型项目、开源社区

**特点**:

- ✅ **完全免费**，MIT 开源许可
- ✅ **功能完整**，包含所有核心特性（33K+ 行代码）
- ✅ **生产可用**，562 个测试全部通过
- ✅ **持续更新**，社区驱动开发
- ✅ **GitHub 开放**，欢迎贡献和反馈

**使用场景**:

- 个人项目和学习
- 小型企业应用（<100K 记录/天）
- 开源项目集成
- 原型开发和验证
- 教育和研究

**支持方式**:

- GitHub Issues
- 社区 Discord/Slack
- 文档和教程
- StackOverflow

---

### ⭐ 企业版 (Professional Edition) - 规划中

**定位**: 企业应用、生产环境、高性能需求、关键业务

**特点**:

- ⚡ **极致性能**，Rust/WASM 核心引擎（2-3x 提升）
- 🔒 **代码保护**，二进制分发，核心算法保护
- 🌐 **分布式**，集群部署，横向扩展
- 📊 **可观测性**，实时监控，性能分析
- 🛡️ **企业级**，SLA 保证，专属支持
- 🚀 **高级功能**，超越社区版的企业特性

**使用场景**:

- 企业生产环境
- 大规模数据处理（>1M 记录/天）
- 关键业务系统
- 高可用性要求
- 合规审计需求

**支持方式**:

- 邮件支持（个人版 48h）
- Slack 实时支持（团队版 24h）
- 专属技术顾问（企业版 4h）
- 定制开发服务
- On-premise 部署支持

---

## 功能对比

### 核心功能对比表

| 功能类别       | 社区版            | 企业版个人      | 企业版团队       | 企业版企业       |
| -------------- | ----------------- | --------------- | ---------------- | ---------------- |
| **存储引擎**   |
| 六序索引       | ✅ JavaScript     | ✅ Rust/WASM    | ✅ Rust/WASM     | ✅ Rust/WASM     |
| LSM-Tree       | ✅ 基础实现       | ✅ 优化实现     | ✅ 优化实现      | ✅ 优化实现      |
| 页面管理       | ✅                | ✅              | ✅               | ✅               |
| **查询系统**   |
| QueryBuilder   | ✅                | ✅              | ✅               | ✅               |
| Cypher         | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| GraphQL        | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| Gremlin        | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| 查询优化器     | ✅ 基础           | ✅ 高级         | ✅ 高级          | ✅ 高级          |
| **索引系统**   |
| B-Tree 索引    | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| 属性索引       | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| 全文索引       | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| 空间索引       | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| 向量索引       | ❌                | ❌              | ✅               | ✅               |
| **事务系统**   |
| WAL v2         | ✅                | ✅              | ✅               | ✅               |
| ACID 保证      | ✅                | ✅              | ✅               | ✅               |
| 崩溃恢复       | ✅                | ✅              | ✅               | ✅               |
| 分布式事务     | ❌                | ❌              | ✅               | ✅               |
| **图算法**     |
| 最短路径       | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| 社区发现       | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| 中心性分析     | ✅                | ✅ 优化         | ✅ 优化          | ✅ 优化          |
| 高级算法       | ❌                | ✅ 部分         | ✅ 全部          | ✅ 全部          |
| **分布式**     |
| 单机部署       | ✅                | ✅              | ✅               | ✅               |
| 集群部署       | ❌                | ❌              | ✅ 5节点         | ✅ 无限          |
| 读写分离       | ❌                | ❌              | ✅               | ✅               |
| 自动故障转移   | ❌                | ❌              | ✅               | ✅               |
| 数据分片       | ❌                | ❌              | ❌               | ✅               |
| **性能**       |
| 插入速度       | 25K ops/sec       | 50K ops/sec     | 75K ops/sec      | 100K+ ops/sec    |
| 查询速度       | 3K queries/sec    | 10K queries/sec | 20K queries/sec  | 30K+ queries/sec |
| 并发连接       | 10                | 50              | 200              | 无限             |
| 数据规模       | <100K records/day | <1M records/day | <10M records/day | 无限             |
| **监控与运维** |
| CLI 工具       | ✅                | ✅              | ✅               | ✅               |
| 性能监控       | ❌                | ✅ 基础         | ✅ 高级          | ✅ 企业级        |
| 实时 Dashboard | ❌                | ❌              | ✅               | ✅               |
| APM 集成       | ❌                | ❌              | ✅               | ✅               |
| 告警系统       | ❌                | ❌              | ✅               | ✅               |
| **数据管理**   |
| 手动备份       | ✅                | ✅              | ✅               | ✅               |
| 自动备份       | ❌                | ✅              | ✅               | ✅               |
| 热备份         | ❌                | ❌              | ✅               | ✅               |
| 增量备份       | ❌                | ❌              | ✅               | ✅               |
| 时间点恢复     | ❌                | ❌              | ✅               | ✅               |
| 数据压缩       | ❌                | ✅              | ✅               | ✅               |
| **安全**       |
| 基础安全       | ✅                | ✅              | ✅               | ✅               |
| 加密存储       | ❌                | ✅              | ✅               | ✅               |
| 传输加密       | ❌                | ❌              | ✅               | ✅               |
| 访问控制       | ❌                | ❌              | ✅               | ✅               |
| 审计日志       | ❌                | ❌              | ✅               | ✅               |
| **支持**       |
| 社区支持       | ✅                | ✅              | ✅               | ✅               |
| 邮件支持       | ❌                | ✅ 48h          | ✅ 24h           | ✅ 4h            |
| Slack 支持     | ❌                | ❌              | ✅               | ✅               |
| 电话支持       | ❌                | ❌              | ❌               | ✅               |
| 专属顾问       | ❌                | ❌              | ❌               | ✅               |
| 定制开发       | ❌                | ❌              | ❌               | ✅               |
| **许可与部署** |
| 许可证         | MIT 开源          | 商业许可        | 商业许可         | 商业许可         |
| 源码访问       | ✅ 完全开放       | ❌              | ❌               | ✅ 托管          |
| 云端部署       | ✅                | ✅              | ✅               | ✅               |
| On-premise     | ✅                | ✅              | ✅               | ✅               |
| 气隙环境       | ✅                | ✅              | ✅               | ✅               |

---

## 企业版核心特性

### 1. 🚀 Rust/WASM 核心引擎

**当前社区版**: JavaScript 实现（33K 行）

**企业版升级**:

```
TypeScript API 层 (薄层, ~2K 行)
    ↓
Rust/WASM 核心引擎 (主要逻辑, ~20K 行 Rust)
    ├─→ 存储引擎 (Rust)
    ├─→ 查询优化器 (Rust)
    ├─→ 索引系统 (Rust)
    ├─→ 事务管理 (Rust)
    └─→ 核心算法 (Rust)
```

**性能提升**:

| 操作 | 社区版 (JS)    | 企业版 (WASM)      | 提升      |
| ---- | -------------- | ------------------ | --------- |
| 插入 | 25K ops/sec    | 50-100K ops/sec    | **2-4x**  |
| 查询 | 3K queries/sec | 10-30K queries/sec | **3-10x** |
| 索引 | 基准           | 2-3x               | **2-3x**  |
| 启动 | ~50ms          | ~20ms              | **2.5x**  |

**额外优势**:

- ✅ 内存安全（Rust 编译器保证）
- ✅ 并发性能（更好的多线程支持）
- ✅ 跨平台（WASM 通用）
- ✅ 代码保护（二进制分发）

---

### 2. 🌐 分布式集群支持

**架构**:

```
┌─────────────────────────────────────────┐
│            负载均衡器                    │
│        (HAProxy / Nginx)                 │
└───────────┬─────────────────────────────┘
            │
    ┌───────┼───────┬───────┐
    │       │       │       │
┌───▼───┐ ┌─▼─────┐ ┌──▼────┐ ┌──────┐
│ 主节点 │ │ 副本1 │ │ 副本2 │ │ ...  │
│(读/写) │ │(只读) │ │(只读) │ │      │
└───────┘ └───────┘ └───────┘ └──────┘
    │         │         │
    └─────────┼─────────┘
              │
    ┌─────────▼─────────┐
    │   共享存储 / Raft  │
    │   (可选)           │
    └───────────────────┘
```

**功能**:

- ✅ **主从复制**: 主节点写入，多个只读副本
- ✅ **读写分离**: 写请求到主节点，读请求负载均衡
- ✅ **自动故障转移**: 主节点故障时自动切换
- ✅ **数据同步**: 实时 / 异步复制
- ✅ **水平扩展**: 动态添加/移除节点

**配置示例**:

```typescript
// 企业版配置
const cluster = await NervusDBCluster.create({
  role: 'primary', // 或 'replica'
  replication: {
    mode: 'async', // 或 'sync'
    replicas: [
      { host: 'replica1.example.com', port: 7001 },
      { host: 'replica2.example.com', port: 7002 },
    ],
  },
  failover: {
    enabled: true,
    timeout: 5000, // ms
    healthCheck: 1000, // ms
  },
});
```

---

### 3. 📊 实时性能监控

**监控 Dashboard**:

```
┌─────────────────────────────────────────────────────┐
│  NervusDB Pro - 性能监控 Dashboard                   │
├─────────────────────────────────────────────────────┤
│                                                      │
│  📈 实时指标                                         │
│  ┌─────────────┬─────────────┬─────────────┐       │
│  │ QPS         │ 延迟        │ 连接数      │       │
│  │ 12,543      │ 2.3ms       │ 87          │       │
│  └─────────────┴─────────────┴─────────────┘       │
│                                                      │
│  📊 查询性能                                         │
│  ┌──────────────────────────────────────────┐       │
│  │  [折线图: 过去 1 小时的 QPS 和延迟]       │       │
│  └──────────────────────────────────────────┘       │
│                                                      │
│  💾 存储统计                                         │
│  - 数据大小: 15.2 GB                                │
│  - 索引大小: 3.8 GB                                 │
│  - 压缩率: 67%                                      │
│  - WAL 大小: 120 MB                                 │
│                                                      │
│  🔥 热门查询 (慢查询)                                │
│  1. 路径查询 Alice->Bob: 125ms (执行 23 次)         │
│  2. 全文搜索 "知识图谱": 89ms (执行 156 次)         │
│  3. 聚合统计: 67ms (执行 45 次)                     │
│                                                      │
│  ⚠️ 告警                                             │
│  - CPU 使用率超过 80% (5 分钟前)                    │
│  - 慢查询数量增加 (10 分钟前)                       │
│                                                      │
└─────────────────────────────────────────────────────┘
```

**指标收集**:

```typescript
// 企业版 API
const metrics = await db.getMetrics();

console.log(metrics);
// {
//   qps: 12543,
//   avgLatency: 2.3,
//   p99Latency: 15.6,
//   connections: 87,
//   storage: {
//     dataSize: 15200000000,
//     indexSize: 3800000000,
//     walSize: 120000000,
//     compressionRatio: 0.67
//   },
//   slowQueries: [
//     { query: "...", latency: 125, count: 23 },
//     // ...
//   ]
// }
```

**APM 集成**:

- ✅ Prometheus 导出
- ✅ Grafana Dashboard
- ✅ Datadog 集成
- ✅ New Relic 支持

---

### 4. 🔍 高级查询优化器

**社区版**: 基础查询规划

**企业版**:

```
┌────────────────────────────────────────┐
│      高级查询优化器                     │
├────────────────────────────────────────┤
│                                        │
│  1. 成本模型优化 (CBO)                 │
│     - 统计信息收集                     │
│     - 代价估算                         │
│     - 最优执行计划选择                 │
│                                        │
│  2. 索引推荐                           │
│     - 自动分析慢查询                   │
│     - 推荐最佳索引                     │
│     - 索引影响评估                     │
│                                        │
│  3. 查询重写                           │
│     - 等价查询转换                     │
│     - 子查询优化                       │
│     - JOIN 顺序优化                    │
│                                        │
│  4. 并行执行                           │
│     - 查询分解                         │
│     - 并行扫描                         │
│     - 结果合并                         │
│                                        │
│  5. 缓存机制                           │
│     - 查询结果缓存                     │
│     - 编译计划缓存                     │
│     - 统计信息缓存                     │
│                                        │
└────────────────────────────────────────┘
```

**示例**:

```typescript
// 企业版查询优化
const result = await db
  .query()
  .from('User')
  .follow('knows')
  .whereProperty('age', '>', 25)
  .limit(100)
  .explain(); // 企业版增强

console.log(result.plan);
// {
//   cost: 1250.5,
//   operator: 'NestedLoopJoin',
//   children: [
//     { operator: 'IndexScan', index: 'User_age_idx', cost: 50.2 },
//     { operator: 'IndexSeek', index: 'knows_SPO', cost: 1200.3 }
//   ],
//   optimizations: [
//     'IndexPushdown',
//     'LimitEarlyReturn',
//     'ParallelScan'
//   ]
// }
```

---

### 5. 💾 数据压缩与备份

**压缩算法**:

```typescript
// 企业版配置
const db = await NervusDBPro.open('data.nervusdb', {
  compression: {
    enabled: true,
    algorithm: 'zstd', // lz4, snappy, zstd
    level: 3, // 1-9
    minSize: 1024, // bytes
  },
});
```

**预期压缩率**:

- 文本数据: 60-70%
- JSON 数据: 50-60%
- 数值数据: 30-40%

**自动备份**:

```typescript
// 企业版配置
const db = await NervusDBPro.open('data.nervusdb', {
  backup: {
    enabled: true,
    schedule: '0 2 * * *', // 每天凌晨 2 点
    destination: 's3://my-bucket/backups/',
    retention: {
      daily: 7,
      weekly: 4,
      monthly: 12,
    },
    type: 'incremental', // 或 'full'
  },
});
```

**热备份**:

```typescript
// 不停机备份
await db.backup({
  destination: '/backup/snapshot-2025-01-14.nvdb',
  type: 'hot', // 不锁定数据库
  compression: true,
});
```

---

### 6. 🛡️ 企业级安全

**加密存储**:

```typescript
// 企业版配置
const db = await NervusDBPro.open('data.nervusdb', {
  encryption: {
    enabled: true,
    algorithm: 'aes-256-gcm',
    keyProvider: async () => {
      // 从密钥管理服务获取
      return await getKeyFromKMS();
    },
  },
});
```

**访问控制**:

```typescript
// 企业版 RBAC
const db = await NervusDBPro.open('data.nervusdb', {
  auth: {
    enabled: true,
    users: [
      {
        username: 'admin',
        password: 'hashed_password',
        roles: ['admin'],
      },
      {
        username: 'reader',
        password: 'hashed_password',
        roles: ['read'],
      },
    ],
  },
});

// 连接时认证
const conn = await NervusDBPro.connect({
  host: 'localhost',
  port: 7000,
  username: 'reader',
  password: 'password',
});
```

**审计日志**:

```typescript
// 自动记录所有操作
// logs/audit.log
{
  "timestamp": "2025-01-14T10:30:00Z",
  "user": "admin",
  "operation": "INSERT",
  "subject": "Alice",
  "predicate": "knows",
  "object": "Bob",
  "ip": "192.168.1.100"
}
```

---

### 7. 🎯 向量索引与相似度搜索

**新增功能**（企业版独有）:

```typescript
// 添加向量数据
await db.addFact({
  subject: 'Document_1',
  predicate: 'hasEmbedding',
  object: 'embedding_1',
  edgeProperties: {
    vector: [0.1, 0.2, 0.3, ..., 0.768], // 768维
    model: 'text-embedding-ada-002'
  }
});

// 向量相似度搜索
const similar = await db.vectorSearch({
  vector: queryVector,
  topK: 10,
  metric: 'cosine', // 或 'euclidean', 'dot'
  filter: {
    model: 'text-embedding-ada-002'
  }
});

console.log(similar);
// [
//   { id: 'Document_5', similarity: 0.95 },
//   { id: 'Document_12', similarity: 0.89 },
//   ...
// ]
```

**支持**:

- ✅ HNSW 索引（高维向量）
- ✅ 余弦 / 欧氏 / 点积距离
- ✅ 增量更新
- ✅ 过滤条件

---

## 技术架构升级

### 社区版架构

```
应用层
  ↓
TypeScript/JavaScript (33K 行)
  ├─→ 存储引擎
  ├─→ 查询引擎
  ├─→ 索引系统
  └─→ 图算法
  ↓
Node.js 运行时
  ↓
文件系统
```

### 企业版架构

```
应用层
  ↓
TypeScript API 层 (薄层, 2K 行)
  ↓
Rust/WASM 核心引擎 (20K 行 Rust)
  ├─→ 存储引擎 (Rust)
  │   ├─ LSM Tree
  │   ├─ B-Tree
  │   └─ 页面管理
  │
  ├─→ 查询引擎 (Rust)
  │   ├─ 查询优化器
  │   ├─ 执行计划
  │   └─ 并行执行
  │
  ├─→ 索引系统 (Rust)
  │   ├─ B-Tree 索引
  │   ├─ HNSW 向量索引
  │   ├─ 全文索引
  │   └─ 空间索引
  │
  └─→ 分布式层 (Rust)
      ├─ Raft 共识
      ├─ 复制协议
      └─ 故障转移
  ↓
WASM 运行时 / Native
  ↓
文件系统 / 网络
```

**关键升级**:

1. **核心引擎 Rust 化**: 90% 代码迁移到 Rust
2. **WASM 二进制**: 代码保护 + 性能提升
3. **分布式层**: 新增集群支持
4. **监控层**: 新增可观测性

---

## 实施路线图

### Phase 1: 存储引擎迁移 (Month 1-2)

**目标**: 将核心存储逻辑迁移到 Rust

**工作内容**:

```rust
// nervusdb-core/src/storage/
├── lsm_tree.rs       // LSM Tree 实现
├── wal.rs            // WAL 事务
├── manifest.rs       // Manifest 管理
├── page_manager.rs   // 页面管理
└── btree.rs          // B-Tree 索引
```

**工作量**:

- 代码: ~3,000 行 Rust
- 测试: ~500 行
- 文档: ~200 行
- 时间: 2-3 周（1 人全职）

**里程碑**:

- ✅ 存储引擎功能完整
- ✅ 性能提升 2x
- ✅ 所有测试通过

---

### Phase 2: 索引系统迁移 (Month 3-4)

**目标**: 索引和查询优化

**工作内容**:

```rust
// nervusdb-core/src/indexes/
├── btree.rs           // B-Tree 索引
├── property_index.rs  // 属性索引
├── fulltext.rs        // 全文索引
├── spatial.rs         // 空间索引
└── vector.rs          // 向量索引 (新增)
```

**工作量**:

- 代码: ~4,000 行 Rust
- 测试: ~800 行
- 时间: 2-3 周

**里程碑**:

- ✅ 索引性能提升 2-3x
- ✅ 新增向量索引
- ✅ 查询优化器完成

---

### Phase 3: 查询引擎迁移 (Month 5-6)

**目标**: 查询执行和优化

**工作内容**:

```rust
// nervusdb-core/src/query/
├── executor.rs        // 查询执行
├── optimizer.rs       // 查询优化
├── pattern_match.rs   // 模式匹配
└── aggregation.rs     // 聚合操作
```

**工作量**:

- 代码: ~5,000 行 Rust
- 测试: ~1,000 行
- 时间: 3-4 周

**里程碑**:

- ✅ 查询性能提升 3x
- ✅ 并行查询支持
- ✅ 高级优化器

---

### Phase 4: 分布式层开发 (Month 7-9)

**目标**: 集群支持

**工作内容**:

```rust
// nervusdb-cluster/src/
├── raft/              // Raft 共识算法
├── replication/       // 主从复制
├── failover/          // 故障转移
└── network/           // 网络通信
```

**工作量**:

- 代码: ~6,000 行 Rust
- 测试: ~1,500 行
- 时间: 6-8 周

**里程碑**:

- ✅ 主从复制
- ✅ 自动故障转移
- ✅ 读写分离

---

### Phase 5: 监控与运维 (Month 10-11)

**目标**: 可观测性

**工作内容**:

```typescript
// nervusdb-dashboard/
├── server/            // 监控服务器
├── web/               // Web Dashboard
└── integrations/      // APM 集成
```

**工作量**:

- 代码: ~3,000 行 TypeScript
- UI: React + Charts
- 时间: 3-4 周

**里程碑**:

- ✅ 实时监控 Dashboard
- ✅ Prometheus 导出
- ✅ Grafana 集成

---

### Phase 6: 安全与合规 (Month 12)

**目标**: 企业级安全

**工作内容**:

- 加密存储
- 访问控制
- 审计日志
- 合规认证准备

**工作量**:

- 代码: ~2,000 行
- 文档: ~500 行
- 时间: 2-3 周

**里程碑**:

- ✅ 数据加密
- ✅ RBAC 完成
- ✅ 审计日志

---

### Phase 7: Beta 测试 (Month 13-14)

**目标**: 真实场景验证

**活动**:

- Alpha 测试（5-10 个用户）
- Beta 测试（20-50 个用户）
- 性能测试
- 压力测试
- 修复 bug

**里程碑**:

- ✅ 稳定性验证
- ✅ 性能达标
- ✅ 用户反馈收集

---

### Phase 8: 正式发布 (Month 15)

**目标**: 商业发布

**活动**:

- 完整文档
- 营销材料
- 支付系统
- 客户支持系统
- 正式发布

**里程碑**:

- ✅ 企业版 v1.0.0
- ✅ 首批客户
- ✅ 收入验证

---

## 定价策略

### 💎 个人版 (Individual)

**价格**: **$49/月** 或 **$490/年**（节省 $98）

**适合**:

- 个人开发者
- 小型项目
- 学习和实验

**包含**:

- ✅ Rust/WASM 核心引擎
- ✅ 2x 性能提升
- ✅ 单机部署
- ✅ 最多 1M records/day
- ✅ 邮件支持（48h 响应）
- ✅ 基础监控
- ✅ 自动备份
- ✅ 数据压缩
- ❌ 集群部署
- ❌ 实时 Dashboard
- ❌ 专属支持

**限制**:

- 单机部署
- 50 并发连接
- 1M records/day

---

### 🏢 团队版 (Team)

**价格**: **$149/月** 或 **$1,490/年**（节省 $298）

**适合**:

- 小型团队
- 中型企业
- 生产环境

**包含**:

- ✅ **所有个人版功能**
- ✅ 3x 性能提升
- ✅ 集群部署（5 节点）
- ✅ 读写分离
- ✅ 自动故障转移
- ✅ 最多 10M records/day
- ✅ Slack 支持（24h 响应）
- ✅ 实时 Dashboard
- ✅ 高级监控
- ✅ APM 集成
- ✅ 热备份
- ✅ 增量备份
- ✅ 向量索引
- ✅ 数据加密
- ❌ 无限扩展
- ❌ 专属顾问

**限制**:

- 5 个节点
- 200 并发连接
- 10M records/day

---

### 🏆 企业版 (Enterprise)

**价格**: **$299+/月**（按需定制）

**适合**:

- 大型企业
- 关键业务
- 高可用需求

**包含**:

- ✅ **所有团队版功能**
- ✅ 无限节点
- ✅ 无限并发
- ✅ 无限数据规模
- ✅ 数据分片
- ✅ 电话支持（4h 紧急响应）
- ✅ 专属技术顾问
- ✅ 定制开发
- ✅ On-premise 部署
- ✅ 源码托管（可选）
- ✅ 气隙环境支持
- ✅ SLA 保证（99.9%+）
- ✅ 合规认证支持
- ✅ 培训服务
- ✅ 迁移服务

**限制**: 无

**附加服务**:

- 源码访问: +$500/月
- 定制开发: $150-200/小时
- 现场支持: 按需报价
- 培训服务: 按需报价

---

### 🎓 教育与非营利

**价格**: **免费** 或 **50% 折扣**

**要求**:

- 教育机构
- 非营利组织
- 开源项目

**申请**: education@nervusdb.com

---

### 对比表

| 版本       | 价格/月   | 性能 | 节点  | 数据量    | 支持      |
| ---------- | --------- | ---- | ----- | --------- | --------- |
| **社区版** | **免费**  | 1x   | 单机  | <100K/day | 社区      |
| **个人版** | **$49**   | 2x   | 单机  | <1M/day   | 邮件 48h  |
| **团队版** | **$149**  | 3x   | 5节点 | <10M/day  | Slack 24h |
| **企业版** | **$299+** | 4x+  | 无限  | 无限      | 专属 4h   |

---

## 目标客户

### 个人版目标客户

**画像**:

- 🧑‍💻 独立开发者
- 💼 自由职业者
- 🚀 初创公司创始人
- 📚 技术爱好者

**痛点**:

- 社区版性能不够
- 需要更好的工具
- 希望支持项目发展
- 预算有限

**典型场景**:

- 个人项目上生产
- 客户项目交付
- SaaS 产品原型
- 数据分析工具

---

### 团队版目标客户

**画像**:

- 🏢 中小型企业（50-500 人）
- 💻 技术团队（5-20 人）
- 📊 数据驱动公司
- 🎯 产品导向组织

**痛点**:

- 需要高可用性
- 数据规模增长
- 团队协作需求
- 预算有限但有支付能力

**典型场景**:

- 生产环境部署
- 知识图谱应用
- 推荐系统
- 数据血缘分析
- DevOps 知识库

**行业**:

- 互联网科技
- 金融科技
- 电商
- SaaS 平台
- AI 应用

---

### 企业版目标客户

**画像**:

- 🏦 大型企业（500+ 人）
- 🌐 跨国公司
- 🏥 医疗机构
- 🏛️ 金融机构
- 🏭 制造业

**痛点**:

- 关键业务系统
- 严格合规要求
- 高可用性（99.9%+）
- 需要专属支持
- 定制化需求
- 安全审计

**典型场景**:

- 企业知识图谱
- 风控系统
- 合规审计
- 供应链管理
- 研发知识库
- 客户关系图谱

**行业**:

- 银行 / 证券 / 保险
- 医疗 / 制药
- 大型互联网
- 电信运营商
- 政府 / 军工
- 能源 / 制造

---

## 商业价值

### 对客户的价值

#### 性能价值

| 场景      | 社区版 | 企业版    | 节省时间 | 价值        |
| --------- | ------ | --------- | -------- | ----------- |
| 100K 插入 | 4秒    | 1-2秒     | 50-75%   | 批处理效率↑ |
| 10K 查询  | 3秒    | 0.3-1秒   | 67-90%   | 用户体验↑   |
| 数据导入  | 1小时  | 15-30分钟 | 50-75%   | 开发效率↑   |

**年度价值估算**（团队版）:

```
假设：10 人团队，每人 8h/天工作

性能提升 2x = 每人节省 2h/天
10 人 × 2h × 250 工作日 = 5,000 小时/年

按 $50/小时 = $250,000/年

投入：$1,788/年（团队版）
ROI = 250,000 / 1,788 = 140x
```

#### 可用性价值

**停机成本**（大型企业）:

```
假设：电商平台，年收入 $100M

停机 1 小时 = $100M / 8760h ≈ $11,400

企业版高可用（99.9% vs 99.5%）:
- 99.5% = 43.8h 停机/年
- 99.9% = 8.76h 停机/年
- 节省 35h/年

价值 = 35h × $11,400/h ≈ $400,000/年
投入 = $3,588/年（企业版）
ROI = 400,000 / 3,588 = 111x
```

#### 人力成本价值

**自建 vs 购买**:

```
自建分布式知识图谱数据库：
- 3 名高级工程师 × 12 个月
- 成本：$300K - $500K
- 维护成本：$100K/年

购买企业版：
- 成本：$3,588/年
- 节省：$296K - $496K（第一年）
- 节省：$96K+/年（后续）
```

---

### 对 NervusDB 的价值

#### 收入预测

**保守估算**（3 年）:

| 年份 | 个人版 | 团队版 | 企业版 | MRR   | ARR       |
| ---- | ------ | ------ | ------ | ----- | --------- |
| Y1   | 20     | 5      | 1      | $2.5K | **$30K**  |
| Y2   | 100    | 25     | 5      | $14K  | **$168K** |
| Y3   | 300    | 80     | 15     | $43K  | **$516K** |

**乐观估算**（3 年）:

| 年份 | 个人版 | 团队版 | 企业版 | MRR   | ARR        |
| ---- | ------ | ------ | ------ | ----- | ---------- |
| Y1   | 50     | 15     | 3      | $6K   | **$72K**   |
| Y2   | 300    | 100    | 20     | $40K  | **$480K**  |
| Y3   | 1000   | 300    | 60     | $131K | **$1.57M** |

#### 品牌价值

- ✅ 技术领先地位
- ✅ 企业客户背书
- ✅ 商业可持续性
- ✅ 社区信任度
- ✅ 融资可能性

---

## 技术保障

### 性能保证

| 指标         | 团队版           | 企业版           |
| ------------ | ---------------- | ---------------- |
| **插入速度** | ≥50K ops/sec     | ≥75K ops/sec     |
| **查询速度** | ≥10K queries/sec | ≥20K queries/sec |
| **P99 延迟** | ≤20ms            | ≤10ms            |
| **启动时间** | ≤30ms            | ≤20ms            |
| **内存占用** | 与社区版相当     | 优化 20%         |

### SLA 承诺

**团队版**:

- 📊 可用性: 99.5%（~43h 停机/年）
- ⏱️ 响应时间: 24 小时
- 🔧 修复时间: 72 小时（P0 bug）

**企业版**:

- 📊 可用性: 99.9%（~8.7h 停机/年）
- ⏱️ 响应时间: 4 小时（紧急）
- 🔧 修复时间: 24 小时（P0 bug）
- 💰 赔偿: 停机超额赔偿月费

### 兼容性保证

- ✅ API 100% 兼容社区版
- ✅ 数据格式兼容
- ✅ 平滑升级路径
- ✅ 降级到社区版支持（有限）

---

## FAQ

### 1. 社区版会被废弃吗？

**答**: **不会！** 社区版永久免费且持续维护：

- ✅ 所有 bug 修复同步
- ✅ 安全补丁同步
- ✅ 文档持续更新
- ✅ 社区支持不变

企业版是**增强版**，不是替代版。

---

### 2. 企业版的源码开放吗？

**答**:

- **默认**: 不开放，二进制分发
- **企业版客户**: 可选购源码托管服务（+$500/月）
  - 提供 Git 仓库访问权限
  - 仅用于审计和定制
  - 不得分发或开源

---

### 3. 数据格式兼容吗？

**答**: **完全兼容！**

- 社区版 → 企业版: 无缝升级
- 企业版 → 社区版: 支持（需导出/导入）

升级命令:

```bash
# 停止社区版
nervusdb stop data.nervusdb

# 使用企业版打开（自动升级）
nervusdb-pro open data.nervusdb
```

---

### 4. API 兼容吗？

**答**: **100% 兼容！**

所有社区版代码无需修改：

```typescript
// 社区版代码
import { NervusDB } from 'nervusdb';

// 企业版只需更改导入
import { NervusDB } from '@nervusdb/pro';

// API 完全一致
const db = await NervusDB.open('data.nervusdb');
await db.addFact({ ... });
```

企业版是**纯增强**，新增 API 但不破坏旧 API。

---

### 5. 可以先试用吗？

**答**: **当然！**

**免费试用**:

- ✅ 14 天全功能试用
- ✅ 不需要信用卡
- ✅ 到期自动降级到社区版（数据不丢失）

申请试用:

```bash
nervusdb-pro trial-register your@email.com
# 或访问: https://nervusdb.com/trial
```

---

### 6. 支持离线部署吗？

**答**: **支持！**

所有版本都支持完全离线：

- ✅ 社区版: npm 包离线安装
- ✅ 企业版: 提供离线安装包
- ✅ 气隙环境: 企业版提供专用包

授权验证:

- 联网: 在线激活
- 离线: 离线激活码（企业版）

---

### 7. 企业版什么时候发布？

**答**:

- **预计时间**: 社区版发布 12-15 个月后
- **里程碑**:
  - Month 3: 社区版稳定后启动
  - Month 12-14: Beta 测试
  - Month 15: 正式发布

**当前状态**（2025-01-14）:

- ✅ 社区版完成
- ⏸️ 企业版规划中
- 📅 待社区版反馈后启动

---

### 8. 可以定制功能吗？

**答**:

- **社区版**: 通过 PR 贡献
- **团队版**: 有限定制（需评估）
- **企业版**: 完全定制（$150-200/小时）

定制范围:

- ✅ 新功能开发
- ✅ 性能优化
- ✅ 集成适配
- ✅ 部署方案
- ❌ 违反架构设计的修改

---

### 9. 如何从社区版升级？

**答**:

1. **购买企业版许可**
2. **安装企业版**:
   ```bash
   npm install -g @nervusdb/pro
   ```
3. **激活许可**:
   ```bash
   nervusdb-pro activate LICENSE_KEY
   ```
4. **替换导入**（代码中）:
   ```typescript
   // import { NervusDB } from 'nervusdb';
   import { NervusDB } from '@nervusdb/pro';
   ```
5. **重启应用**

数据无需迁移，自动升级！

---

### 10. 许可证如何计费？

**答**:

- **按节点**: 每个运行实例 = 1 个许可证
- **集群**: 主节点 + 所有副本都需要许可证
- **开发环境**: 免费（需注册）
- **测试环境**: 免费（需注册）

**示例**:

```
生产集群: 1 主 + 2 副本 = 3 许可证
团队版: $149/月 支持 5 节点 ✅
```

---

## 附录

### A. 技术术语表

| 术语         | 说明                                         |
| ------------ | -------------------------------------------- |
| **WASM**     | WebAssembly，跨平台二进制格式                |
| **Rust**     | 系统编程语言，内存安全 + 高性能              |
| **LSM-Tree** | Log-Structured Merge Tree 存储结构           |
| **Raft**     | 分布式共识算法                               |
| **HNSW**     | 高维向量索引算法                             |
| **APM**      | Application Performance Monitoring           |
| **SLA**      | Service Level Agreement 服务等级协议         |
| **RBAC**     | Role-Based Access Control 基于角色的访问控制 |

### B. 参考文档

- [社区版文档](../README.md)
- [WASM 实现计划](./WASM_IMPLEMENTATION_PLAN.md)
- [代码保护状况](./CODE_PROTECTION_STATUS.md)
- [开源 vs 闭源策略](./OPEN_VS_CLOSED_SOURCE_STRATEGY.md)

### C. 联系方式

- **商务咨询**: sales@nervusdb.com
- **技术咨询**: support@nervusdb.com
- **合作伙伴**: partners@nervusdb.com
- **教育申请**: education@nervusdb.com

---

**文档维护**: 本文档将随着企业版开发进度更新

**最后更新**: 2025-01-14  
**下次评估**: 社区版发布 6 个月后  
**状态**: 📋 规划阶段
