# 03 · 查询与联想（基础/链式）

```ts
import { SynapseDB } from 'synapsedb';

const db = await SynapseDB.open('graph.synapsedb', { enableLock: true });

db.addFact({ subject: 'Alice', predicate: 'KNOWS', object: 'Bob' });
db.addFact({ subject: 'Bob', predicate: 'KNOWS', object: 'Carol' });
await db.flush();

// 点查
const knows = db.find({ predicate: 'KNOWS' }).all();

// 链式联想：Alice 的朋友的朋友
const fof = db.find({ subject: 'Alice', predicate: 'KNOWS' }).follow('KNOWS').all();

// 反向联想：谁认识 Bob
const who = db.find({ object: 'Bob' }).followReverse('KNOWS').all();

// 过滤与限制
const heavy = db
  .find({ predicate: 'KNOWS' })
  .where((edge) => (edge.edgeProperties?.weight as number) > 10)
  .limit(10)
  .all();

console.log({ knows, fof, who, heavy });
await db.close();
```

要点

- `find({ s/p/o })`：任意组合
- `follow / followReverse`：链式联想
- `where / limit`：结果过滤与限制
