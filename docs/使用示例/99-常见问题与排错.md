# 示例 99 · 常见问题与排错

> 配合 [教程 09 · 常见问题与排错](../教学文档/教程-09-FAQ与排错.md)，提供命令级别的实操。

## 1. CLI 报 “manifest not found”

```bash
synapsedb check demo.synapsedb --summary
synapsedb repair demo.synapsedb --fast
```

## 2. auto-compact 总是跳过

```bash
synapsedb readers demo.synapsedb
# 结束对应查询或等待再执行
```

## 3. 查询慢

```bash
synapsedb stats demo.synapsedb --summary | jq '.orders.SPO.multiPagePrimaries'
# 根据输出调整 auto-compact 或属性索引
```

## 4. WAL 爆增

```bash
synapsedb stats demo.synapsedb --summary | jq '.walBytes'
synapsedb auto-compact demo.synapsedb --auto-gc
```

## 5. 属性查询无结果

```bash
synapsedb dump demo.synapsedb POS 123 | rg '"dept"'
```

## 6. GraphQL 报错

- 检查 `docs/使用示例/graphql_usage.md`
- 使用 QueryBuilder 重现，确认语义

## 7. 幂等失效

```bash
synapsedb txids demo.synapsedb --list=10
# 确认 txId 是否重复；必要时重新生成
```

## 8. 备份恢复后异常

```bash
synapsedb check demo.synapsedb --strict
synapsedb repair demo.synapsedb --rebuild-indexes
```

## 参考脚本

- `docs/使用示例/09-嵌入式脚本与自动化-示例.md`
- `scripts/` 目录中的诊断脚本
